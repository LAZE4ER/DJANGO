<h1>Topics</h1>

<form method="post" action="{% url 'create_topic' %}">
    {% csrf_token %}
    <input type="text" name="name" placeholder="New topic">
    <button type="submit">Create</button>
</form>

<hr>

<ul>
{% for topic in topics %}
    <li>
        <b>{{ topic.name }}</b>
        ({{ topic.subscribers.count }} subscribers)

        {% if user in topic.subscribers.all %}
            <form method="post" action="{% url 'unsubscribe' topic.id %}" style="display:inline;">
                {% csrf_token %}
                <button>Unsubscribe</button>
            </form>
        {% else %}
            <form method="post" action="{% url 'subscribe' topic.id %}" style="display:inline;">
                {% csrf_token %}
                <button>Subscribe</button>
            </form>
        {% endif %}

        <form method="post" action="{% url 'delete_topic' topic.id %}" style="display:inline;">
            {% csrf_token %}
            <button>Delete</button>
        </form>
    </li>
{% endfor %}
</ul>
